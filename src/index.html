<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>GlimBoi</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="output.css">
    <link rel="stylesheet" href="css/tailwind.css">
    <!-- jQuery library -->
    <script>window.$ = window.jQuery = require('jquery'); let dirName = __dirname
    </script>
    <!-- Popper JS -->
    <script src="../build/frontend/popper.js"></script>
    <!-- Latest compiled JavaScript -->
    <script src="../build/frontend/bootstrap/bootstrap.min.js"></script>
    <link href="css/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/dataTables.css">
    <script src="../build/frontend/dataTables/dataTables.js"></script>

    <script src="../node_modules/flowbite/dist/flowbite.js"></script>

    <!--custom scripts-->
    <script src="../build/frontend/electronNav.js"></script>
    <script src="../build/frontend/home.js"></script>
    <script src="../build/frontend/users.js"></script>
    <script src="../build/frontend/ranks.js"></script>
    <script src="../build/frontend/commands.js"></script>
    <script src="../build/frontend/media.js"></script>
    <script src="../build/frontend/chat.js"></script>
    <script src="../build/frontend/events.js"></script>
    <script src="../build/frontend/music.js"></script>
    <script src="../build/frontend/modPanel.js"></script>
    <script src="../build/frontend/settings.js"></script>
</head>

<body>
    <div class="" style="width: 100%; background-color: #14193d;color:transparent;-webkit-app-region: drag">Have a nice
        day :)
        <i id="maximize" class="fa fa-window-maximize mx-1 mt-1"
            style="color: skyblue; float: right; -webkit-app-region: no-drag"></i>
        <i id="minimize" class="fa fa-window-minimize mx-1 mt-1"
            style="color: skyblue; float: right;-webkit-app-region: no-drag"></i>
        <i id="refresh" class="fas fa-sync mx-1 mt-1"
            style="color: skyblue; float: right; -webkit-app-region: no-drag"></i>
    </div>
    <!-- Tailwind nav -->
    <nav class="glimNav">
        <div class="pr-2 sm:pr-6 lg:pr-8">
            <div class="relative flex items-center h-16" id="mainNavBar">
                <div class="flex-1 flex items-center justify-center sm:items-stretch sm:justify-start">
                    <div class="sm:block sm:ml-6">
                        <div class="flex space-x-4" id="navContainer">
                            <a class="nav-link disabled text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium" href="../src/html/commands.html" id="CommandLink">Commands</a>
                            <a class="nav-link disabled text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium" href="../src/html/points.html" id="PointsLink">Points</a>
                            <a class="nav-link disabled text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium" href="../src/html/events.html" id="EventsLink">Events</a>
                            <a class="nav-link disabled text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium" href="../src/html/users.html" id="UsersLink">Users</a>
                            <a class="nav-link disabled text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium" href="../src/html/ranks.html" id="RanksLink">Ranks</a>
                            <a class="nav-link disabled text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium" href="../src/html/media.html" id="OBSLink">Media</a>
                            <a class="nav-link disabled text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium" href="../src/html/music.html" id="MusicLink">Music Player</a>
                            <a class="nav-link disabled text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium" href="../src/html/modPanel.html" id="ModPanelLink">Moderation</a>
                            <a class="nav-link disabled text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium" href="../src/html/settings.html" id="SettingsLink">Integrations</a>
                            <a class="nav-link disabled text-gray-300 hover:text-white px-3 py-2 rounded-md text-sm font-medium" href="../src/html/chat.html" id="ChatLink">Chat</a>
                            </div>
                    </div>
                </div>
                <div class="items-center justify-center">
                    <a class="nav-link glimNavItem active font-bold text-xl" href="../src/html/homepage.html"style="color: turquoise;" id="GlimBoiHeader">GlimBoi</a>
                </div>
                <div class="flex nav-item glimNavItem justify-center ml-8">
                    <div class="glimNavItem text whiteText group">
                        <a class="nav-link glimNavItem text whiteText inline-flex items-center" href="#" style="color: #b2dbff;">Status
                            <svg class="ml-2 w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </a>
                        <!-- Status dropdown -->
                        <div class="cursor-default hidden group-hover:flex ml-3 absolute" id="statusDropdown">
                            <div class="whiteText mt-2 w-48 rounded-md shadow-lg py-1 ring-1 ring-black ring-opacity-5 focus:outline-none mr-64"
                                aria-orientation="vertical" style="background-color: #14365b">
                                <a class="navbarAlt block px-4 py-2 text-sm" href="#">
                                    <p>Chat: <span id="navChatStatus" style="color:red">None</span></p>
                                </a>
                                <a class="navbarAlt block px-4 py-2 text-sm border-t-2 border-emerald-50 m-0" href="#">
                                    <p id="version"></p>
                                    <span class="badge badge-pill badge-success" style="position: relative;left: 20%;">Production</span>
                                </a>
                            </div>
                        </div>
                    </div>
                    <a class="nav-link glimNavItem active whiteText ml-4" href="#" id="close">Exit</a>
                </div>
            </div>
        </div>

        <!-- Mobile menu, show/hide based on menu state. -->
        <div class="sm:hidden" id="mobile-menu">
            <div class="px-2 pt-2 pb-3 space-y-1">
                <!-- Current: "bg-gray-900 text-white", Default: "text-gray-300 hover:bg-gray-700 hover:text-white" -->
                <a href="#" class="bg-gray-900 text-white block px-3 py-2 rounded-md text-base font-medium"
                    aria-current="page">Dashboard</a>

                <a href="#"
                    class="text-gray-300 hover:bg-gray-700 hover:text-white block px-3 py-2 rounded-md text-base font-medium">Team</a>

                <a href="#"
                    class="text-gray-300 hover:bg-gray-700 hover:text-white block px-3 py-2 rounded-md text-base font-medium">Projects</a>

                <a href="#"
                    class="text-gray-300 hover:bg-gray-700 hover:text-white block px-3 py-2 rounded-md text-base font-medium">Calendar</a>
            </div>
        </div>
    </nav>
    <!--End of Navbar-->


    <!-- Layout for home page -->
    <div class="pane h-100">
        <div class="card-body mt-3 mb-6 ml-3 mr-3 px-8 pb-8 rounded-xl glimPanel whiteText">

            <div class="grid grid-cols-1 md:grid-cols-2 gap-2">
                <div>
                    <h4 class="text-2xl font-bold mt-3">Welcome to <span style="color:turquoise">GlimBoi</span></h4>
                    <p class="mt-6 text-xl">To get started select "Authorize." Log in with the account you want the bot to speak as. Glimboi
                        should request a token, but if you can't join a chat you should request one yourself.</p>
                    <p class="mt-6 text-xl">After that Glimboi will automatically request a token on startup. It may take 5-10 seconds to do
                        so. If you can't get something to work let me know!</p>
                    <p class="mt-6 text-xl">The bot may get disconnected, but it should rejoin after 5-10 seconds. You can toggle the message
                        on the chat page. It will look like nothing is happening, but it is reconnecting on the
                        background.</p>
                    <div class="grid grid-cols-4 gap-1 mt-4" >
                        <button class="btn-info" type="submit" id="authButton2" onclick="loadLink('glimboi.com/docs')">Documentation</button>
                        <button class="btn-info" type="submit" id="authButton3"
                            onclick="loadLink('github.com/aMytho/GlimBoi/blob/main/README.md')">Contributing</button>
                        <button class="btn-info" type="submit" id="authButton4"
                            onclick="loadLink('docs.google.com/forms/d/e/1FAIpQLScfCSuRgQwVqji0d5QKNUVIfQNiL64Q-dBEWseiXy0W_rSEcA/viewform?usp=sf_link')">Feedback</button>
                        <button class="btn-info" type="submit" id="authButton6"
                            onclick="loadLink('github.com/aMytho/GlimBoi/releases/latest')">Update Details</button>
                    </div>
                </div>
                <div>
                    <button class="btn-info mt-2 w-full" type="submit" id="saveAuth"
                        onclick="AuthHandle.requestUserAuthorization()">Authorize</button>
                    <button class="btn-info mt-2 w-full" type="submit" id="joinChannelBOT" disabled
                        onclick="AuthHandle.requestToken(true);">Request Token</button>
                    <div class="row mt-3">
                        <div class="col-12">
                            <div id="chart" class="mt-2">
                                <h3 class="text-center text-2xl font-bold">Bot Information</h3>
                                <table class="table whiteText mt-2 w-full border-collapse border-slate-200 bc rounded-xl " style="background-color: #14365b;">
                                    <thead>
                                        <tr>
                                            <th class="p-3 cyanBorder border-1 border-b-0 border-x-0 text-xl text-left" scope="col">Collection</th>
                                            <th class="p-3 cyanBorder border-1 border-b-0 border-x-0 text-xl text-left" scope="col">Count</th>
                                        </tr>
                                    </thead>
                                    <tbody style="color: aliceblue;">
                                        <tr>
                                            <td class="p-3 cyanBorder border-solid border-4 border-x-0 border-b-0">
                                                Commands
                                            </td>
                                            <td class="p-3 cyanBorder border-solid border-4 border-x-0 border-b-0">
                                                <span id="commandCount">0</span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="p-3 cyanBorder border-solid border-1 border-x-0 border-b-0">
                                                Users
                                            </td>
                                            <td class="p-3 cyanBorder border-solid border-1 border-x-0 border-b-0">
                                                <span id="userCount">0</span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="p-3 cyanBorder border-solid border-1 border-x-0 border-b-0">
                                                Points
                                            </td>
                                            <td class="p-3 cyanBorder border-solid border-1 border-x-0 border-b-0">
                                                <span id="pointCount">0</span>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="p-3 cyanBorder border-solid border-1 border-x-0 border-b-0">
                                                Quotes
                                            </td>
                                            <td class="p-3 cyanBorder border-solid border-1 border-x-0 border-b-0">
                                                <span id="quoteCount">0</span>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="notification" class="hidden glimPanel">
        <p id="message" class="whiteText"></p>
        <button id="close-button" onClick="closeNotification()" class="hidden btn btn-outline-primary">
            Close
        </button>
        <button id="restart-button" onClick="restartApp()" class="hidden btn btn-outline-success">
            Restart
        </button>
    </div>
    <style>
        #notification {
            position: fixed;
            bottom: 20px;
            left: 20px;
            width: 200px;
            padding: 20px;
            border-radius: 5px;
            background-color: white;
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
        }

        .hidden {
            display: none;
        }
    </style>
    <script>
        //Creates the chart. Only build the first time. Also checks for updates
        async function startEverything() {
            checkForUpdate();
            loadBotStats();
            await startAuthProcess();
            unlockRequestToken();
        }
        startEverything();
    </script>
</body>

</html>

<!-- Main modal -->
<div id="modalError" aria-hidden="true" class="hidden overflow-y-auto overflow-x-hidden fixed right-0 left-0 top-4 z-50 justify-center items-center h-modal md:h-full md:inset-0">
    <div class="relative px-4 w-full max-w-2xl h-full md:h-auto">
        <!-- Modal content -->
        <div class="relative bg-white rounded-lg shadow dark:bg-gray-700">
            <!-- Modal header -->
            <div class="flex justify-between items-start p-5 rounded-t border-b dark:border-gray-600">
                <h3 class="text-xl font-semibold text-gray-900 lg:text-2xl dark:text-white" id="myModalError">
                    Terms of Service
                </h3>
                <button type="button" class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center dark:hover:bg-gray-600 dark:hover:text-white" data-modal-toggle="defaultModal">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path></svg>
                </button>
            </div>
            <!-- Modal body -->
            <div class="p-6 space-y-6">
                <p class="text-base leading-relaxed text-gray-500 dark:text-gray-400" id="errorMessageSolution">
                    With less than a month to go before the European Union enacts new consumer privacy laws for its citizens, companies around the world are updating their terms of service agreements to comply.
                </p>
            </div>
            <!-- Modal footer -->
            <div class="flex items-center p-6 space-x-2 rounded-b border-t border-gray-200 dark:border-gray-600">
                <button data-modal-toggle="defaultModal" type="button" class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">I accept</button>
                <button data-modal-toggle="defaultModal" type="button" class="text-gray-500 bg-white hover:bg-gray-100 focus:ring-4 focus:ring-gray-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5 hover:text-gray-900 focus:z-10 dark:bg-gray-700 dark:text-gray-300 dark:border-gray-500 dark:hover:text-white dark:hover:bg-gray-600">Decline</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal: Error Message -->
<div class="hidden fixed top-0 left-0 right-0 bottom-0 m-12 z-50" id="modalError" aria-hidden="true">
    <div class="w-3/12 h-1/4" role="document">
        <div class="glimPanel whiteText" id="errorModal">
            <!--Header-->
            <div class="whiteText text-center text-2xl font-bold w-full">
                <h4 id="myModalError">Error</h4>
            </div>
            <!--Body-->
            <div id="modalErrorBody">
                <p id="errorMessageText"></p>
                <p id="errorMessageSolution"></p>
            </div>
            <!--Footer-->
            <div class="modal-footer">
                <button type="button" class="btn-warning" data-modal-target="modalError">Close</button>
            </div>
        </div>
    </div>
</div>
<!-- Modal: Error Message -->

<!-- Modal: Success Message -->
<div class="modal fade" id="modalSuccess" tabindex="-1" role="dialog" aria-labelledby="success modal" aria-hidden="true"
    style="overflow-wrap: break-word;">
    <div class="modal-dialog" role="document">
        <div class="modal-content glimPanel whiteText" id="successModal">
            <!--Header-->
            <div class="modal-header text-center">
                <h4 class="modal-title w-100" id="myModalSuccess">Info</h4>
            </div>
            <!--Body-->
            <div class="modal-body" id="modalSuccessBody">
                <p id="successMessageText"></p>
                <p id="successMessageSolution"></p>
            </div>
            <!--Footer-->
            <div class="modal-footer">
                <p id="otherMessageAdd"></p>
                <button type="button" class="btn btn-outline-warning" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<!-- Modal: Success Message -->

<!-- Modal: Moderate? -->
<div class="modal fade" id="reconnectModal" tabindex="-1" role="dialog" aria-labelledby="chat modal" aria-hidden="true"
    style="overflow-wrap: break-word;">
    <div class="modal-dialog" role="document">
        <div class="modal-content glimPanel whiteText">
            <!--Header-->
            <div class="modal-header text-center">
                <h4 class="modal-title w-100">Reconnecting</h4>
            </div>
            <!--Body-->
            <div class="modal-body">
                <p id="chatMessageSolution" class="mt-2">Attempting to reconnect in 5 seconds...</p>
            </div>
            <!--Footer-->
            <div class="modal-footer">
                <button type="button" class="btn btn-outline-danger" data-dismiss="modal"
                    onclick="clearTimeout(reconnectDelay)">Cancel</button>
            </div>
        </div>
    </div>
</div>
<!-- Modal: Moderate -->
<div aria-live="polite" aria-atomic="true">
    <!-- Position it -->
    <div style="position: absolute; bottom: 5%; right: 1%;z-index: 999;float: right;" id="toastContainer">




    </div>
</div>

