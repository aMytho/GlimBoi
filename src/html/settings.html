<div class="glimPanel m-4 mt-5 p-4">
    <ul class="mb-3 flex flex-wrap justify-center" data-tabs-toggle="#settingTabs" role="tablist" id="settingTabNav">
        <li class="mx-2" role="presentation">
            <button class="btn-info inline-block py-4 px-4 whiteText cursor-pointer" id="liveSettingsTab"
                data-tabs-target="#liveSettings" type="button" role="tab" aria-controls="liveSettings"
                aria-selected="true">
                Going-Live
            </button>
        </li>
        <li class="mx-2" role="presentation">
            <button class="btn-info inline-block py-4 px-4 whiteText cursor-pointer" id="obsSettingsTab"
                data-tabs-target="#obsSettings" type="button" role="tab" aria-controls="obsSettings"
                aria-selected="false">OBS WebSocket</button>
        </li>
        <li class="mx-2" role="presentation">
            <button class="btn-info inline-block py-4 px-4 whiteText cursor-pointer" id="followSettingsTab"
                data-tabs-target="#followSettings" type="button" role="tab" aria-controls="followSettings"
                aria-selected="false">Follow Scripts
            </button>
        </li>
    </ul>
    <div id="settingTabs" class="prose lg:prose-base prose-h3:text-lg max-w-none">
        <div id="liveSettings" role="tabpanel" aria-labelledby="liveSettingsTab">
            <div class="mt-2 grid grid-cols-1 md:grid-cols-2 gap-8">
                <!--DISCORD-->
                <div class="whiteText ml-2">
                    <h3 class="whiteText font-bold text-2xl">Discord</h3>
                    <p>Send a message to your server when you join a channel.</p>
                    <div class="niceSwitch">
                        <label class="switch">
                            <input type="checkbox" id="discordWebhookEnabled">
                            <span class="slider round"></span>
                        </label>
                        <p>Disabled / Enabled</p>
                    </div>
                    <p>Webhook URI</p>
                    <input class="icon-input settingsInput" type="text" placeholder="Discord Webhook URI"
                        id="discordWebhookURL"
                        style="background-color: #1b2e4b;color: aquamarine;width:80%;">
                    <p>Default Message</p>
                    <input class="icon-input settingsInput" type="text" placeholder="Default Message"
                        id="discordWebhookMessage"
                        style="background-color: #1b2e4b;color: aquamarine;width: 95%;">
                    <p>Confirm before send?</p>
                    <div class="niceSwitch">
                        <label class="switch">
                            <input type="checkbox" id="discordWebhookConfirmation">
                            <span class="slider round"></span>
                        </label>
                        <p>Disabled / Enabled</p>
                    </div>
                    <p>If enabled Glimboi will ask for confirmation before sending the message. You can also
                        add stream specific details (what you're doing that stream)</p>
                </div>
                <!--GUILDED-->
                <div class="whiteText ml-2">
                    <h3 class="whiteText font-bold text-2xl">Guilded</h3>
                    <p>Send a message to your guild when you join a channel.</p>
                    <div class="niceSwitch">
                        <label class="switch">
                            <input type="checkbox" id="guildedWebhookEnabled">
                            <span class="slider round"></span>
                        </label>
                        <p>Disabled / Enabled</p>
                    </div>
                    <p>Webhook URI</p>
                    <input class="icon-input settingsInput" type="text" placeholder="Guilded Webhook URI"
                        id="guildedWebhookURL"
                        style="background-color: #1b2e4b;color: aquamarine;width: 80%;">
                    <p>Default Message</p>
                    <input class="icon-input settingsInput" type="text" placeholder="Default Message"
                        id="guildedWebhookMessage"
                        style="background-color: #1b2e4b;color: aquamarine;width: 95%;">
                    <p>Confirm before send?</p>
                    <div class="niceSwitch">
                        <label class="switch">
                            <input type="checkbox" id="guildedWebhookConfirmation">
                            <span class="slider round"></span>
                        </label>
                        <p>Disabled / Enabled</p>
                    </div>
                    <p>If enabled Glimboi will ask for confirmation before sending the message. You can also
                        add stream specific details (what you're doing that stream)</p>
                </div>
                <!--TWITTER-->
                <div class="whiteText ml-2">
                    <hr>
                    <h3 class="whiteText font-bold text-2xl">Twitter</h3>
                    <p>Tweet when you join a channel. <b>Does not affect command tweets.</b></p>
                    <div class="niceSwitch">
                        <label class="switch">
                            <input type="checkbox" id="twitterEnabled">
                            <span class="slider round"></span>
                        </label>
                        <p>Disabled / Enabled</p>
                    </div>
                    <p>Access Token <span style="color:rgb(251, 133, 251);cursor: pointer;"
                            onclick="ApiHandle.Webhooks.TwitterWebhook.requestUserAuthorization()">Generate</span>
                    </p>
                    <p>An access token is required to use the Twitter API. Generating one will open an URL
                        in your default browser.
                        You <b>must</b> be signed in to approve the app. You can copy the link from the
                        address bar into another browser if you prefer.
                    </p>
                    <p>Default Message</p>
                    <input class="icon-input settingsInput" type="text" placeholder="Default Message"
                        id="twitterMessage"
                        style="background-color: #1b2e4b;color: aquamarine;width: 95%;">
                    <p>Confirm before send?</p>
                    <div class="niceSwitch">
                        <label class="switch">
                            <input type="checkbox" id="twitterConfirmation">
                            <span class="slider round"></span>
                        </label>
                        <p>Disabled / Enabled</p>
                    </div>
                    <p>If enabled Glimboi will ask for confirmation before sending the message. You can also
                        add stream specific details (what you're doing that stream)</p>
                    <b>To fully disable Twitter integration you need to revoke Glimboi from the allowed apps
                        list
                        <span style="color:rgb(251, 133, 251);cursor: pointer;"
                            onclick="loadLink('twitter.com/settings/connected_apps')">here</span>.
                    </b>
                </div>
                <!--MATRIX-->
                <div class="whiteText ml-2">
                    <hr>
                    <h3 class="whiteText font-bold text-2xl">Matrix</h3>
                    <p>Send a message when you join a channel. <b>Does not affect command messages.</b></p>
                    <div class="niceSwitch">
                        <label class="switch">
                            <input type="checkbox" id="matrixEnabled">
                            <span class="slider round"></span>
                        </label>
                        <p>Disabled / Enabled</p>
                    </div>
                    <p>Access Token <span style="color:rgb(251, 133, 251);cursor: pointer;"
                            onclick="loadLink('app.element.io')">View</span></p>
                    <p>An access token is required to use the Matrix API. You can view your token from the
                        element web panel.
                    </p>
                    <input class="icon-input settingsInput" type="text" placeholder="Access Token" id="matrixToken"
                        style="background-color: #1b2e4b;color: aquamarine;width: 95%;">
                    <p>Default Message</p>
                    <input class="icon-input settingsInput" type="text" placeholder="Default Message" id="matrixMessage"
                        style="background-color: #1b2e4b;color: aquamarine;width: 95%;">
                    <p>Default Room (Internal <span style="color:rgb(251, 133, 251);cursor: pointer;"
                            onclick="loadLink('glimboi.com/docs/integrations/goinglive/#matrix')">Room ID</span>.) Ex.
                        !KieCrZCMdQEJTCAspJ:matrix.org</p>
                    <input class="icon-input settingsInput" type="text" placeholder="Default Room" id="matrixRoom"
                        style="background-color: #1b2e4b;color: aquamarine;width: 95%;">
                    <p></p>
                    <div class="niceSwitch">
                        <label class="switch">
                            <input type="checkbox" id="matrixConfirmation">
                            <span class="slider round"></span>
                        </label>
                        <p>Disabled / Enabled</p>
                    </div>
                    <p>If enabled Glimboi will ask for confirmation before sending the message. You can also
                        add stream specific details (what you're doing that stream)</p>
                </div>
            </div>
        </div>
        <div class="hidden" id="obsSettings" role="tabpanel" aria-labelledby="obsSettingsTab">
            <div class="row mt-2">
                <div class="col-sm-5 col-12 whiteText ml-2">
                    <h3 class="whiteText font-bold text-2xl">OBS WebSocket</h3>
                    <p>Interact with OBS from Glimboi.</p>
                    <div class="niceSwitch">
                        <label class="switch">
                            <input type="checkbox" id="obsEnabled">
                            <span class="slider round"></span>
                        </label>
                        <p>Disabled / Enabled</p>
                    </div>
                    <p>WebSocket Password</p>
                    <p>A password is optional with OBS webscokets. If you are on a public internet
                        connection you should add a password.</p>
                    <input class="icon-input settingsInput" type="text" placeholder="OBS websocket password"
                        id="obsPassword"
                        style="background-color: #1b2e4b;color: aquamarine;width:80%;">
                </div>
                <div class="col-12 col-sm-1 whiteText"></div>
                <div class="col-sm-5 col-12 whiteText ml-2">
                    <p>WebSocket URL</p>
                    <p>The URL to connect to. If OBS and Glimboi are on the same device it is likely
                        "localhost" (the default)</p>
                    <input class="icon-input settingsInput" type="text" placeholder="OBS websocket URL" id="obsUrl"
                        style="background-color: #1b2e4b;color: aquamarine;width:80%;">
                </div>
            </div>
        </div>
        <div class="hidden" id="followSettings" role="tabpanel" aria-labelledby="followSettingsTab">
            <div class="row mt-2">
                <div class="col-sm-5 col-12 whiteText ml-2">
                    <h3 class="whiteText font-bold text-2xl">Follow Message</h3>
                    <p>Send a message when someone follows.</p>
                    <div class="niceSwitch">
                        <label class="switch">
                            <input type="checkbox" id="followMessageEnabled">
                            <span class="slider round"></span>
                        </label>
                        <p>Disabled / Enabled</p>
                    </div>
                    <p>Enter the message to send. You can add $follower to be replaced with the followers
                        name.</p>
                    <input class="icon-input settingsInput" type="text" placeholder="Thanks for the follow $follower !"
                        id="followMessage"
                        style="background-color: #1b2e4b;color: aquamarine;width:80%;">
                </div>
                <div class="col-12 col-sm-1 whiteText"></div>
                <div class="col-sm-5 col-12 whiteText ml-2 hidden">
                    <h3>Streamlabs Alerts</h3>
                    <p>Play a Streamlabs alert on follow. Requires an existing account.</p>
                    <div class="niceSwitch">
                        <label class="switch">
                            <input type="checkbox" id="streamlabsEnabled">
                            <span class="slider round"></span>
                        </label>
                        <p>Disabled / Enabled</p>
                    </div>
                    <p>Click <span onclick="loadLink('calm-citadel-14699.herokuapp.com/authorize')"
                            style="color:rgb(251, 133, 251);cursor: pointer;">here</span> to get a token.
                    </p>
                    <p>Enter your generated Streamlabs token. Keep Private!</p>
                    <input class="icon-input settingsInput" type="text" placeholder="Streamlabs Token (keep private!)"
                        id="streamlabsKey"
                        style="background-color: #1b2e4b;color: aquamarine;width:80%;">
                    <p>Message to show in the alert. Use $follower for the name of the follower.</p>
                    <input class="icon-input settingsInput" type="text" placeholder="Thanks for the follow $user "
                        id="streamlabsMessage"
                        style="background-color: #1b2e4b;color: aquamarine;width:80%;">
                </div>
            </div>
        </div>
        <hr style="border-color: aliceblue;" class="mt-2">
    </div>
    <div class="flex flex-row-reverse mt-4">
        <a class="btn-info mx-2" href="#" onclick="saveIntegrations()">Save</a>
        <a class="btn-danger mx-2" href="#" data-modal-toggle="openDB">Edit
            Database</a>
        <a class="btn-success mx-2" href="#" data-modal-toggle="createBackup">Create
            Backup</a>
        <a class="btn-info mx-2" href="#" data-modal-toggle="importBackup">Import
            Backup</a>
    </div>
</div>

<!-- Modal: open db -->
<div class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 w-full md:inset-0 h-modal md:h-full"
    id="openDB" tabindex="-1" aria-hidden="true" style="overflow-wrap: break-word;">
    <div class="relative max-w-md h-full md:h-auto whiteText">
        <div class="rounded-lg shadow p-4 relative glimPanel whiteText">
            <!--Header-->
            <div class="text-center w-full border-solid border-b-2 border-blue-300 pb-2">
                <h4 class="text-center whiteText font-bold text-2xl w-full">Edit Database</h4>
            </div>
            <!--Body-->
            <div class="px-6 pb-4 mt-8">
                <div class="prose prose-base">
                    <p class="whiteText">You can manually edit the bot files if the Glimboi is having problems. You
                        should
                        only edit these files if you know what you are doing.</p>
                    <p class="whiteText">The file names must remain the same. The data is stored in a NeDB (MongoDB)
                        database. You
                        should research it before editing these files.</p>
                    <p class="errorMessage whiteText font-bold text-xl">Backup the files in the folder before editing them. There is no way to
                        reverse these changes once made.</p>
                </div>
            </div>
            <!--Footer-->
            <div class="flex justify-end relative bottom-0 mr-8 mt-8 w-full border-t-2 border-blue-300 border-solid py-2">
                <p id="errorQuoteExit"></p>
                <button type="button" class="mb-0 btn-warning" data-modal-toggle="openDB">Close</button>
                <button class="mb-0 btn-danger" onclick="shell.openPath(appData[1] + '/data')">Open</button>
            </div>
        </div>
    </div>
</div>
<!-- Modal: open db -->

<div class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 w-full md:inset-0 h-modal md:h-full"
    id="createBackup" tabindex="-1" aria-hidden="true" style="overflow-wrap: break-word;">
    <div class="relative h-full md:h-auto whiteText">
        <div class="rounded-lg shadow p-4 relative glimPanel whiteText">
            <!--Header-->
            <div class="text-center w-full border-solid border-b-2 border-blue-300 pb-2">
                <h4 class="text-center whiteText font-bold text-2xl w-full">Create Backup</h4>
            </div>
            <!--Body-->
            <div class="px-6 pb-4 mt-8">
                <div class="prose prose-base">
                    <p class="whiteText">You can manually create a backup of your bot data. You can use it as a
                        traditional backup, use on other devices, or send to other users. <b>This will overrwrite any
                            backups in the location chosen.</b></p>
                    <p class="whiteText">In a future update Glimboi will automatically creates backups of your data.</p>
                    <p class="whiteText">If you don't fully understand anything listed above contact Mytho!</p>
                    <!--Create checkboxes-->
                    <div class="mt-2 grid grid-cols-2 whiteText">
                        <div class="niceSwitch mt-2">
                            <label class="switch">
                                <input type="checkbox" id="backupCommands">
                                <span class="slider round"></span>
                            </label>
                            <p class="mx-0 mb-0 my-0">Commands</p>
                        </div>
                        <div class="niceSwitch mt-2">
                            <label class="switch">
                                <input type="checkbox" id="backupUsers">
                                <span class="slider round"></span>
                            </label>
                            <p class="mx-0 mb-0 my-0">Users</p>
                        </div>
                        <div class="niceSwitch mt-2">
                            <label class="switch">
                                <input type="checkbox" id="backupRanks">
                                <span class="slider round"></span>
                            </label>
                            <p class="mx-0 mb-0 my-0">Ranks</p>
                        </div>
                        <div class="niceSwitch mt-2">
                            <label class="switch">
                                <input type="checkbox" id="backupQuotes">
                                <span class="slider round"></span>
                            </label>
                            <p class="mx-0 mb-0 my-0">Quotes</p>
                        </div>
                        <div class="niceSwitch mt-2">
                            <label class="switch">
                                <input type="checkbox" id="backupModeration">
                                <span class="slider round"></span>
                            </label>
                            <p class="mx-0 mb-0 my-0">Banned Words</p>
                        </div>
                        <div class="niceSwitch mt-2">
                            <label class="switch">
                                <input type="checkbox" id="backupMedia">
                                <span class="slider round"></span>
                            </label>
                            <p class="mx-0 mb-0 my-0">Media (files not included)</p>
                        </div>
                        <div class="niceSwitch mt-2">
                            <label class="switch">
                                <input type="checkbox" id="backupLogging">
                                <span class="slider round"></span>
                            </label>
                            <p class="mx-0 mb-0 my-0">Logs</p>
                        </div>
                    </div>
                </div>
            </div>
            <!--Footer-->
            <div class="flex justify-end relative bottom-0 mr-8 mt-8 w-full border-t-2 border-blue-300 border-solid py-2">
                <button type="button" class="mb-0 btn-warning" data-modal-toggle="createBackup">Close</button>
                <button class="mb-0 btn-success" onclick="backupData()">Create Backup</button>
            </div>
        </div>
    </div>
</div>

<div class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 w-full md:inset-0 h-modal md:h-full"
    id="importBackup" tabindex="-1" aria-hidden="true" style="overflow-wrap: break-word;">
    <div class="relative h-full md:h-auto whiteText">
        <div class="rounded-lg shadow p-4 relative glimPanel whiteText">
            <!--Header-->
            <div class="text-center w-full border-solid border-b-2 border-blue-300 pb-2">
                <h4 class="text-center whiteText font-bold text-2xl w-full">Import Backup</h4>
            </div>
            <!--Body-->
            <div class="px-6 pb-4 mt-8">
                <div class="prose prose-base">
                    <p class="whiteText">You can import data from a backup.</p>
                    <p class="whiteText"><b>This will overwrite your current data. You should create a backup before
                            importing new data.</b></p>
                    <p class="whiteText">This will import all data that you have saved within Glimboi.</p>
                    <p class="text-red-600 font-bold text-lg">If you don't fully understand anything listed above contact Mytho!</p>
                    <div class="mt-2 grid grid-cols-2 whiteText">
                        <div class="niceSwitch mt-2">
                            <label class="switch">
                                <input type="checkbox" id="importCommands">
                                <span class="slider round"></span>
                            </label>
                            <p class="mx-0 mb-0 my-0">Commands</p>
                        </div>
                        <div class="niceSwitch mt-2">
                            <label class="switch">
                                <input type="checkbox" id="importUsers">
                                <span class="slider round"></span>
                            </label>
                            <p class="mx-0 mb-0 my-0">Users</p>
                        </div>
                        <div class="niceSwitch mt-2">
                            <label class="switch">
                                <input type="checkbox" id="importRanks">
                                <span class="slider round"></span>
                            </label>
                            <p class="mx-0 mb-0 my-0">Ranks</p>
                        </div>
                        <div class="niceSwitch mt-2">
                            <label class="switch">
                                <input type="checkbox" id="importQuotes">
                                <span class="slider round"></span>
                            </label>
                            <p class="mx-0 mb-0 my-0">Quotes</p>
                        </div>
                        <div class="niceSwitch mt-2">
                            <label class="switch">
                                <input type="checkbox" id="importModeration">
                                <span class="slider round"></span>
                            </label>
                            <p class="mx-0 mb-0 my-0">Banned Words</p>
                        </div>
                        <div class="niceSwitch mt-2">
                            <label class="switch">
                                <input type="checkbox" id="importMedia">
                                <span class="slider round"></span>
                            </label>
                            <p class="mx-0 mb-0 my-0">Media (files not included)</p>
                        </div>
                        <div class="niceSwitch mt-2">
                            <label class="switch">
                                <input type="checkbox" id="importLogging">
                                <span class="slider round"></span>
                            </label>
                            <p class="mx-0 mb-0 my-0">Logs</p>
                        </div>
                    </div>

                </div>
            </div>
            <!--Footer-->
            <div class="flex justify-end relative bottom-0 mr-8 mt-8 w-full border-t-2 border-blue-300 border-solid py-2">
                <button type="button" class="mb-0 btn-warning" data-modal-toggle="importBackup">Close</button>
                <button class="mb-0 btn-success" onclick="importData()">Import Data</button>
            </div>
        </div>
    </div>
</div>

<style>
    .switch {
        position: relative;
        display: inline-block;
        width: 50px;
        height: 24px;
    }

    .switch input {
        opacity: 0;
        width: 0;
        height: 0;
    }

    .slider {
        position: absolute;
        cursor: pointer;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: #ccc;
        -webkit-transition: .4s;
        transition: .4s;
    }

    .slider:before {
        position: absolute;
        content: "";
        height: 16px;
        width: 16px;
        left: 4px;
        bottom: 4px;
        background-color: white;
        -webkit-transition: .4s;
        transition: .4s;
    }

    input:checked+.slider {
        background-color: #2196F3;
    }

    input:focus+.slider {
        box-shadow: 0 0 1px #2196F3;
    }

    input:checked+.slider:before {
        -webkit-transform: translateX(26px);
        -ms-transform: translateX(26px);
        transform: translateX(26px);
    }

    /* Rounded sliders */
    .slider.round {
        border-radius: 34px;
    }

    .slider.round:before {
        border-radius: 50%;
    }

    li .active {
        color: #17a2b8;
    }

    .settingsInput {
        width: auto;
        margin-left: 1rem;
    }

    .niceSwitch label {
        float: left;
        width: 50px;
        text-align: right;
        margin: 0 0 0 10px;
    }

    .niceSwitch p {
        margin-left: 5rem;
    }
    input {
        padding-top: 2rem;
        padding-bottom: 2rem;
        margin-bottom: 0.7rem;
        margin-top: 0.7rem;
    }
</style>